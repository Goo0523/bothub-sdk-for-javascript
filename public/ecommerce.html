
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Bothub SDK 电商使用示例 - UAT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <script src="env.js"></script>
  </head>
  <body>
    <section>
      <h1>Bothub SDK 电商使用示例</h1>
      <p>
        配置商品信息后可通过 messenger_checkbox 或 send_to_messenger 插件将订单信息发送到用户Messenger
        <a href="https://docs.bothub.ai/audience/sdk-integration.html" target="_blank">查看文档</a>
      </p>
    </section>

    <!-- 加载 Checkbox Plugin -->
    <div id="bothub-messenger-checkbox" prechecked="true" size="small"></div>
    <button onclick="BOTHUB.ECommerce.resetMessengerCheckboxReceipt(receipt_reset)">重置订单回执数据</button>
    <button onclick="BOTHUB.Marketing.logEvent('send_order_receipt', null, {user_id: 1})">发送订单回执</button>
    <br><br><br>
    <!-- 加载 Send to Messenger Plugin -->
    <div id="bothub-send-to-messenger" color="blue" size="standard"></div>
    <button onclick="BOTHUB.ECommerce.resetSendToMessengerReceipt(receipt_reset)">重置订单回执数据</button>
    <button onclick="BOTHUB.ECommerce.resetSendToMessengerFeed(feed_reset)">重置商品列表数据</button>

    <!-- 电商相关数据 按需使用-->
    <script src="https://sdk.bothub.ai/data/ecommerce.js"></script>
    <!-- 在body最底部加入sdk代码 -->
    <script>
      window.BOTHUB = {
        facebook_page_id: $ENV.facebook_page_id,
        messenger_app_id: $ENV.messenger_app_id,
        entrance: {
          fb_messenger_checkbox_ref:  {"gateway":"engagement","code":"receipt_checkbox","psid":0,"hash_id":46},
          fb_customerchat_ref: "base64:eyJnYXRld2F5IjoiZW5nYWdlbWVudCIsImNvZGUiOiI0ZSIsInBzaWQiOjB9",
          fb_send_to_messenger_data_ref: "base64:eyJnYXRld2F5IjoiZW5nYWdlbWVudCJ9",
        },
        // 电商数据
        ecommerce: {
          send_to_messenger: {
            receipt: receipt_data,
            feed: feed_data
          },
          messenger_checkbox: {
            receipt: receipt_data
          }
        },
        debug: $ENV.debug,
      };
      (function(s,id,l){s.id=id;s.src=l;window[id]||document.body.appendChild(s)})
      (document.createElement('script'),'bothub-sdk','./bothub.js');
    </script>
  </body>
</html>
