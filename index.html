<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Bothub SDK 使用示例 - UAT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body {padding: 40px}
      button {padding: 8px 12px;cursor: pointer;background: #3273dc;border: none;color: white;border-radius: 3px}
      button:hover {background: #4384ed}
      h2 {margin-top: 20px;border-bottom: 1px solid #ddd;font-size: 15px;line-height: 34px;font-weight: noraml}
      h3 {margin-top: 30px}
      .row {margin-top: 15px}
      .fb-messenger-checkbox {margin-left: -12px}
      .fb_iframe_widget {display: block !important; margin-bottom: 20px}
    </style>
  </head>
  <body>
    <section>
      <h1>Bothub SDK 使用示例</h1>
      <p>
        SDK提供了将商品加入购物车、愿望清单、下订单等事件，并且可以根据事件推送消息。
        <a href="https://docs.bothub.ai/audience/sdk-integration.html" target="_blank">查看文档</a>
      </p>
    </section>
    
    <h2>插件</h2>
    <!-- 加载 Checkbox Plugin -->
    <div class="fb-messenger-checkbox" prechecked="true" size="small"></div>
    <!-- 加载 Customer Chat Plugin -->
    <div class="fb-customerchat"></div>
    <!-- 加载 Send to Messenger Plugin -->
    <div class="fb-send-to-messenger" color="blue" size="standard"></div>
    <!-- 加载 Message Us Plugin -->
    <div class="fb-messengermessageus" color="blue" size="standard"></div>
    
    <h2>事件</h2>
    <section>
      <h3>标准事件</h3>
      <button onclick="BOTHUB.Marketing.logAddedToCartEvent('1', 'T-shirt', 'USD', 26.99)">加入购物车</button>
      <button onclick="BOTHUB.Marketing.logAddedToWishlistEvent('1', 'backpack', 'CNY', 599)">添加愿望单</button>
      <button onclick="BOTHUB.Marketing.logInitiatedCheckoutEvent('1', 'music', 5, true, 'USD', 6)">商品支付</button>
    </section>
    <section>
      <h3>自定义事件</h3>
      <p>我们创建一个名为“预约面试”的自定义事件：</p>
      <button onclick="BOTHUB.Marketing.logEvent('scheduled_interview', null, {user_id: 1})">预约面试</button>
    </section>
    <section>
      <h3>定时通知事件</h3>
      <p>通知事件是自定义事件的一个特殊用法，需要在第三个参数传递通知时间戳。</p>
      <button onclick="BOTHUB.Marketing.logEvent('scheduled_interview', null, { trigger_time: Date.parse(new Date())/1000 })">面试通知</button>
    </section>

    <h2>电商</h2>
    <!-- 电商相关数据 按需使用-->
    <script src="https://sdk.bothub.ai/data/ecommerce.js?v=1"></script>
    <section>
      <button onclick="BOTHUB.ECommerce.resetSendToMessengerReceipt(receipt_reset)">重置订单回执</button>
      <button onclick="BOTHUB.ECommerce.resetSendToMessengerFeed(feed_reset)">重置商品列表</button>
      Send to Messenger
    </section>
    <br>
    <section>
      <button onclick="BOTHUB.ECommerce.resetMessengerCheckboxReceipt(receipt_reset)">重置订单回执</button>
      Messenger Checkbox
    </section>

    <!-- 在body最底部加入sdk代码 -->
    <script>
      window.BOTHUB = {
        facebook_page_id: "387214325054678",
        messenger_app_id: "1724119764514436",
        api_server: "https://uat-api.bothub.ai/",
        language: 'en_US',
        // entrance 为可选参数
        entrance: {
          fb_messenger_checkbox_ref: { gateway: "engagement"},
          fb_send_to_messenger_data_ref: "base64:eyJnYXRld2F5IjoiZW5nYWdlbWVudCIsImNvZGUiOiJrIiwicHNpZCI6MH0=",
          fb_customerchat_ref: "base64:eyJnYXRld2F5IjoiZW5nYWdlbWVudCIsImNvZGUiOiJuIiwicHNpZCI6MH0="
        },
        // ecommerce 为可选参数
        ecommerce: {
          messenger_checkbox: {
            receipt: receipt_data
          },
          send_to_messenger: {
            receipt: receipt_data,
            feed: feed_data
          },
        },
        debug: false,
      };
      (function(s,id,l){s.id=id;s.src=l;window[id]||document.body.appendChild(s)})
      (document.createElement('script'),'bothub-sdk','./dist/bothub.js');
    </script>
  </body>
</html>
